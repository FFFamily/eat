<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>货物交付单</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'SimSun', 'Microsoft YaHei', 'PingFang SC', serif;
            font-size: 12px;
            line-height: 1.5;
            color: #333;
            background: white;
            padding: 40px;
        }
        
        .delivery-note-preview {
            background: white;
            min-height: 100%;
        }
        
        /* 交付单标题 */
        .delivery-title {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .delivery-title h1 {
            font-size: 28px;
            font-weight: bold;
            margin: 0;
        }
        
        /* 合同基本信息 */
        .contract-info {
            margin-bottom: 30px;
        }
        
        .contract-parties {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .party-item {
            display: flex;
            align-items: center;
        }
        
        .party-item .label {
            font-weight: bold;
            min-width: 80px;
        }
        
        .party-item .value {
            margin-left: 10px;
        }
        
        /* 交付说明 */
        .delivery-description {
            text-align: center;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .delivery-description p {
            margin: 0;
        }
        
        /* 章节标题 */
        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin: 25px 0 15px 0;
            padding: 8px 0;
            border-bottom: 1px solid #ccc;
        }
        
        /* 二级标题 */
        .sub-section-title {
            font-size: 14px;
            font-weight: bold;
            margin: 15px 0 10px 0;
            display: block;
        }
        
        /* 信息项 */
        .info-item {
            margin: 8px 0;
            line-height: 1.8;
            display: block;
        }
        
        .info-item .label {
            font-weight: bold;
            margin-right: 5px;
            display: inline;
        }
        
        .info-item .value {
            display: inline;
            margin-left: 0;
        }
        
        /* 对于交付重量等特殊情况，value 直接显示 */
        .delivery-weight-info .info-item .value {
            display: inline;
        }
        
        /* 交付地址中的每个字段独立一行 */
        .delivery-address-info .info-item {
            display: block;
        }
        
        .delivery-address-info .info-item .label {
            display: inline;
        }
        
        .delivery-address-info .info-item .value {
            display: inline;
        }
        
        /* 交付经办人中的每个字段独立一行 */
        .delivery-processor-info .info-item {
            display: block;
        }
        
        .delivery-processor-info .info-item .label {
            display: inline;
        }
        
        .delivery-processor-info .info-item .value {
            display: inline;
        }
        
        /* 信息文本 */
        .info-text {
            margin: 8px 0;
            line-height: 1.8;
        }
        
        /* 交付内容信息 */
        .delivery-content-info {
            margin-bottom: 20px;
        }
        
        /* 交付重量信息 */
        .delivery-weight-info {
            margin-bottom: 20px;
        }
        
        /* 交付地址信息 */
        .delivery-address-info {
            margin-bottom: 20px;
        }
        
        /* 交付经办人信息 */
        .delivery-processor-info {
            margin-bottom: 20px;
        }
        
        /* 其他信息 */
        .other-info-section {
            margin-top: 30px;
            margin-bottom: 30px;
        }
        
        .other-info-content {
            margin-top: 15px;
        }
        
        .other-info-item {
            margin-bottom: 20px;
        }
        
        /* 货物明细表格 */
        .goods-details-table {
            margin-bottom: 20px;
        }
        
        .goods-details-table table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ccc;
        }
        
        .goods-details-table th,
        .goods-details-table td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }
        
        .goods-details-table th {
            background-color: #f5f5f5;
            font-weight: bold;
        }
        
        .goods-details-table .total-row {
            background-color: #f9f9f9;
            font-weight: bold;
        }
        
        .goods-details-table .total-label {
            text-align: right;
        }
        
        
        /* 签名区域 */
        .signature-section {
            margin-top: 50px;
            margin-bottom: 30px;
        }
        
        .signature-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
        }
        
        .signature-item {
            display: flex;
            flex-direction: column;
        }
        
        .signature-item .label {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .signature-item .signature-box {
            min-height: 80px;
            border-bottom: 1px solid #ccc;
            margin-bottom: 10px;
        }
        
        .signature-item .signature-name {
            text-align: center;
            margin-top: 5px;
        }
        
        .signature-item .signature-date {
            text-align: center;
            font-size: 11px;
            color: #666;
        }
        
        /* 批注说明 */
        .notes-section {
            margin-top: 20px;
        }
        
        .notes-text {
            font-size: 12px;
            color: #666;
            margin: 0;
            line-height: 1.6;
        }
        
        /* 公司信息和日期 */
        .company-info-footer {
            margin-top: 50px;
            text-align: right;
        }
        
        .company-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .delivery-date {
            font-size: 12px;
            color: #666;
        }
        
        /* 打印样式优化 */
        @media print {
            body {
                padding: 20px;
            }
            
            .delivery-note-preview {
                page-break-inside: avoid;
            }
            
            .signature-section {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="delivery-note-preview">
        <!-- 交付单标题 -->
        <div class="delivery-title">
            <h1>货物交付单</h1>
        </div>

        <!-- 合同基本信息 -->
        <div class="contract-info">
            <div class="contract-parties">
                <div class="party-item">
                    <span class="label">甲方：</span>
                    <span class="value" th:text="${orderData.partyAName ?: '--'}">甲方名称</span>
                </div>
                <div class="party-item">
                    <span class="label">乙方：</span>
                    <span class="value" th:text="${orderData.partyBName ?: '--'}">乙方名称</span>
                </div>
                <div class="party-item">
                    <span class="label">合同编号：</span>
                    <span class="value" th:text="${orderData.contractNo ?: '--'}">合同编号</span>
                </div>
            </div>
        </div>

        <!-- 交付说明 -->
        <div class="delivery-description">
            <p>现就该合同下编号为 <strong th:text="${orderData.no ?: '--'}">订单编号</strong> 的订单进行货物交付</p>
        </div>

        <!-- 一、交付信息 -->
        <div class="delivery-info-section">
            <h2 class="section-title">一、交付信息</h2>
            
            <!-- （1）交付内容 -->
            <div class="delivery-content-info">
                <p class="sub-section-title">（1）交付内容</p>
                <p class="info-text">再生资源货物，以该订单对应的《业务结算单》为准</p>
                <p class="info-item">
                    <span class="label">货物备注：</span>
                    <span class="value" th:text="${orderData.deliveryRemark ?: '--'}">货物备注字段</span>
                </p>
            </div>
            
            <!-- （2）交付重量 -->
            <div class="delivery-weight-info">
                <p class="sub-section-title">（2）交付重量</p>
                <p class="info-item">
                    <span class="value" th:if="${orderData.deliveryWeight != null}" th:text="${#numbers.formatDecimal(orderData.deliveryWeight, 0, 2) + ' kg'}">交付重量字段 kg</span>
                    <span class="value" th:unless="${orderData.deliveryWeight != null}">--</span>
                </p>
            </div>
            
            <!-- （3）交付地址 -->
            <div class="delivery-address-info">
                <p class="sub-section-title">（3）交付地址</p>
                <p class="info-item">
                    <span class="label">交付地点：</span>
                    <span class="value" th:text="${orderData.deliveryAddress ?: '--'}">交付地点字段</span>
                </p>
                <p class="info-item">
                    <span class="label">交付时间：</span>
                    <span class="value" th:text="${orderData.deliveryTime ?: deliveryDate ?: '--'}">交付时间字段</span>
                </p>
                <p class="info-item">
                    <span class="label">交付照片：</span>
                    <span class="value" th:if="${orderData.deliveryPhoto}">
                        <img th:src="${orderData.deliveryPhoto}" style="max-width: 300px; max-height: 200px; object-fit: contain; border: 1px solid #ccc; padding: 5px; margin-top: 5px;" alt="交付照片"/>
                    </span>
                    <span class="value" th:unless="${orderData.deliveryPhoto}">--</span>
                </p>
            </div>
            
            <!-- （4）交付经办人 -->
            <div class="delivery-processor-info">
                <p class="sub-section-title">（4）交付经办人</p>
                <p class="info-item">
                    <span class="label">供方公司名称：</span>
                    <span class="value" th:text="${orderData.partyAName ?: '--'}">供方公司名称</span>
                    <br/>
                    <span th:if="${orderData.partnerProcessorName != null and orderData.partnerProcessorName != '--'}" class="value" th:text="${'：' + orderData.partnerProcessorName + '（' + (orderData.partnerProcessorPhone ?: '--') + '）'}">：供方经办人字段（电话）</span>
                    <span th:unless="${orderData.partnerProcessorName != null and orderData.partnerProcessorName != '--'}" class="value">：--（--）</span>
                </p>
                <p class="info-item">
                    <span class="label">需方公司名称：</span>
                    <span class="value" th:text="${orderData.partyBName ?: '--'}">需方公司名称</span>
                    <br/>
                    <span class="value" th:text="${'：' + (orderData.processorName ?: orderData.processor ?: '--') + '（' + (orderData.processorPhone ?: '--') + '）'}">：需方经办人（电话）</span>
                </p>
            </div>
        </div>

        <!-- 二、其他信息 -->
        <div class="other-info-section">
            <h2 class="section-title">二、其他信息</h2>
            <div class="other-info-content">
                <div class="other-info-item">
                    <p class="sub-section-title">（1）合规提示</p>
                    <p class="info-text">按合同约定，您承诺并确认本次交付的货物来源合法，非盗窃、抢劫等非法所得。</p>
                </div>
                <div class="other-info-item">
                    <p class="sub-section-title">（2）授权提示</p>
                    <p class="info-text">按合同约定，您在确认本交付单内容后，您提供"订单识别码"行为，视为您同意本交付单。</p>
                </div>
                <div class="other-info-item">
                    <p class="sub-section-title">（3）双方确认</p>
                    <p class="info-text">以上货物已交付，此交付单为交付事实确认。</p>
                </div>
            </div>
        </div>

        <!-- 签名区域 -->
        <div class="signature-section">
            <div class="signature-grid">
                <div class="signature-item">
                    <span class="label">交付方（甲方）签字：</span>
                    <div class="signature-box" th:if="${orderData.partnerSignature}">
                        <img th:src="${orderData.partnerSignature}" style="max-width: 100%; max-height: 80px; object-fit: contain;" alt="交付方签名"/>
                    </div>
                    <div class="signature-name" th:text="${orderData.partyAName ?: '--'}">交付方名称</div>
                    <div class="signature-date" th:text="${deliveryDate ?: '--'}">日期</div>
                </div>
                <div class="signature-item">
                    <span class="label">接收方（乙方）签字：</span>
                    <div class="signature-box" th:if="${orderData.processorSignature}">
                        <img th:src="${orderData.processorSignature}" style="max-width: 100%; max-height: 80px; object-fit: contain;" alt="接收方签名"/>
                    </div>
                    <div class="signature-name" th:text="${orderData.partyBName ?: '--'}">接收方名称</div>
                    <div class="signature-date" th:text="${deliveryDate ?: '--'}">日期</div>
                </div>
            </div>
        </div>


        <!-- 最终批注 -->
        <div class="notes-section" style="margin-top: 30px;">
            <p class="notes-text">
                <strong>注：</strong>本交付单经双方签字确认后生效，如有疑问请于本单据发出后3个工作日内联系我司企业微信客服或经办人员 <strong>孟经理（13683335083）</strong>。
            </p>
        </div>

        <!-- 公司信息和日期 -->
        <div class="company-info-footer">
            <div class="company-name">云南伏宁再生资源有限公司</div>
            <div class="delivery-date">交付单生成日期：<span th:text="${deliveryDate ?: '--'}">日期</span></div>
        </div>
    </div>
</body>
</html>

